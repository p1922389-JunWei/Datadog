{"title":"GenAI Security & Operations","description":null,"widgets":[{"id":1000000000000001,"definition":{"type":"note","content":"# Application Overview","background_color":"blue","font_size":"14","text_align":"center","show_tick":false,"tick_pos":"50%","tick_edge":"bottom"},"layout":{"x":0,"y":0,"width":12,"height":1}},{"id":1644853264097670,"definition":{"title":"Average Latency","title_size":"16","title_align":"left","show_legend":false,"legend_layout":"auto","legend_columns":["avg","min","max","value","sum"],"type":"timeseries","requests":[{"formulas":[{"alias":"avg","formula":"avg"},{"alias":"p75","formula":"pc75"},{"alias":"p90","formula":"pc90"},{"alias":"p95","formula":"pc95"}],"queries":[{"data_source":"llm_observability","name":"avg","indexes":["llmobs"],"compute":{"aggregation":"avg","metric":"@duration"},"group_by":[],"search":{"query":"@ml_app:gemini-chat-api @event_type:span @parent_id:undefined"}},{"data_source":"llm_observability","name":"pc75","indexes":["llmobs"],"compute":{"aggregation":"pc75","metric":"@duration"},"group_by":[],"search":{"query":"@ml_app:gemini-chat-api @event_type:span @parent_id:undefined"}},{"data_source":"llm_observability","name":"pc90","indexes":["llmobs"],"compute":{"aggregation":"pc90","metric":"@duration"},"group_by":[],"search":{"query":"@ml_app:gemini-chat-api @event_type:span @parent_id:undefined"}},{"data_source":"llm_observability","name":"pc95","indexes":["llmobs"],"compute":{"aggregation":"pc95","metric":"@duration"},"group_by":[],"search":{"query":"@ml_app:gemini-chat-api @event_type:span @parent_id:undefined"}}],"response_format":"timeseries","style":{"palette":"green","color_order":"shuffled","line_type":"solid","line_width":"normal"},"display_type":"line"}]},"layout":{"x":0,"y":1,"width":2,"height":2}},{"id":5323406288462783,"definition":{"title":"Requests","title_size":"16","title_align":"left","show_legend":false,"legend_layout":"auto","legend_columns":["avg","min","max","value","sum"],"type":"timeseries","requests":[{"formulas":[{"alias":"Traces","formula":"traces"}],"queries":[{"data_source":"llm_observability","name":"traces","indexes":["llmobs"],"compute":{"aggregation":"count"},"group_by":[{"facet":"@meta.span.kind","limit":10,"sort":{"order":"desc","aggregation":"count"}}],"search":{"query":"@ml_app:gemini-chat-api @event_type:span @parent_id:undefined"}}],"response_format":"timeseries","style":{"palette":"semantic","line_type":"solid","line_width":"normal"},"display_type":"bars"}]},"layout":{"x":2,"y":1,"width":2,"height":2}},{"id":1000000000000004,"definition":{"title":"API Success Rate","title_size":"16","title_align":"center","type":"query_value","requests":[{"conditional_formats":[{"comparator":">=","value":99,"palette":"white_on_green"},{"comparator":"<=","value":99.5,"palette":"white_on_yellow"},{"comparator":"<","value":99,"palette":"white_on_red"}],"response_format":"scalar","queries":[{"data_source":"metrics","name":"query2","query":"sum:trace.fastapi.request.hits{service:gemini-challenge-app}.as_count()","aggregator":"avg"},{"data_source":"metrics","name":"query1","query":"sum:trace.fastapi.request.errors{service:gemini-challenge-app}.as_count()","aggregator":"avg"}],"formulas":[{"number_format":{"unit":{"label":"%","type":"custom_unit_label"}},"formula":"(query2 - query1) / query2 * 100"}]}],"precision":2},"layout":{"x":4,"y":1,"width":2,"height":2}},{"id":1000000000000005,"definition":{"title":"Cache Hit Rate","title_size":"16","title_align":"center","type":"query_value","requests":[{"conditional_formats":[{"comparator":">=","value":70,"palette":"white_on_green"},{"comparator":">=","value":50,"palette":"white_on_yellow"},{"comparator":"<","value":50,"palette":"white_on_red"}],"response_format":"scalar","queries":[{"data_source":"metrics","name":"query1","query":"sum:bearstack.cache.hits{*}.as_count()","aggregator":"avg"},{"data_source":"metrics","name":"query2","query":"sum:bearstack.cache.misses{*}.as_count()","aggregator":"avg"}],"formulas":[{"formula":"(query1 / (query1 + query2)) * 100"}]}],"custom_unit":"%","precision":1},"layout":{"x":6,"y":1,"width":2,"height":2}},{"id":1000000000000006,"definition":{"title":"Jailbreaks (24h)","title_size":"16","title_align":"center","type":"query_value","requests":[{"response_format":"scalar","queries":[{"data_source":"metrics","name":"jailbreaks","query":"avg:bearstack.api.jailbreaks.detected{*}.as_count()","aggregator":"avg"}],"formulas":[{"formula":"jailbreaks"}],"conditional_formats":[{"comparator":"<=","value":0,"palette":"white_on_green"},{"comparator":">","value":0,"palette":"white_on_red"}]}],"precision":0},"layout":{"x":8,"y":1,"width":2,"height":2}},{"id":662031186214279,"definition":{"title":"Token Cost","title_size":"16","title_align":"left","type":"query_value","requests":[{"formulas":[{"formula":"query / 1000000000","number_format":{"unit":{"type":"canonical_unit","unit_name":"dollar"}}}],"queries":[{"data_source":"llm_observability","name":"query","indexes":["llmobs"],"compute":{"aggregation":"sum","metric":"@metrics.estimated_total_cost"},"group_by":[],"search":{"query":"@ml_app:gemini-chat-api @event_type:span @parent_id:*"}}],"response_format":"scalar","conditional_formats":[{"comparator":"<","value":1,"palette":"white_on_green"},{"comparator":">=","value":1,"palette":"white_on_yellow"},{"comparator":">=","value":5,"palette":"white_on_red"}]}],"autoscale":true,"precision":2,"timeseries_background":{"type":"area"}},"layout":{"x":10,"y":1,"width":2,"height":2}},{"id":1000000000000007,"definition":{"title":"API Health (200 OK vs 429 Rate Limited)","title_size":"16","title_align":"left","show_legend":true,"legend_layout":"auto","legend_columns":["avg","min","max","value","sum"],"type":"timeseries","requests":[{"response_format":"timeseries","queries":[{"name":"query1","data_source":"spans","search":{"query":""},"indexes":["*"],"group_by":[{"facet":"@http.status_code","limit":10,"sort":{"aggregation":"count","order":"desc","metric":"count"},"should_exclude_missing":true}],"compute":{"aggregation":"count"},"storage":"hot"}],"formulas":[{"formula":"query1"}],"style":{"palette":"semantic","order_by":"values","line_type":"solid","line_width":"normal"},"display_type":"line"}]},"layout":{"x":0,"y":3,"width":6,"height":3}},{"id":1000000000000008,"definition":{"title":"Cache Hit vs API Call Latency","title_size":"16","title_align":"left","show_legend":true,"legend_layout":"auto","legend_columns":["avg","min","max","value"],"type":"timeseries","requests":[{"response_format":"timeseries","queries":[{"data_source":"metrics","name":"query1","query":"avg:trace.http.request.duration{service:gemini-challenge-app,cache.hit:true}"}],"style":{"palette":"cool","line_type":"solid","line_width":"normal"},"display_type":"line"},{"response_format":"timeseries","queries":[{"data_source":"metrics","name":"query1","query":"avg:trace.http.request.duration{service:gemini-challenge-app,cache.hit:false}"}],"style":{"palette":"warm","line_type":"solid","line_width":"normal"},"display_type":"line"}],"yaxis":{"label":"Latency (ms)","scale":"linear","min":"auto","max":"auto"},"markers":[{"value":"y = 2000","display_type":"error dashed"},{"value":"y = 1000","display_type":"warning dashed"}]},"layout":{"x":6,"y":3,"width":6,"height":3}},{"id":1000000000000099,"definition":{"type":"note","content":"## Redis & Cache Performance","background_color":"gray","font_size":"14","text_align":"left","show_tick":false},"layout":{"x":0,"y":6,"width":12,"height":1}},{"id":1000000000000009,"definition":{"title":"Cache Hit Rate Over Time","title_size":"16","title_align":"left","show_legend":true,"legend_layout":"auto","legend_columns":["avg","min","max","value","sum"],"type":"timeseries","requests":[{"formulas":[{"formula":"query1"}],"queries":[{"name":"query1","data_source":"spans","search":{"query":"@cache.hit:true service:gemini-chat-api"},"indexes":["*"],"group_by":[],"compute":{"aggregation":"count"},"storage":"hot"}],"response_format":"timeseries","style":{"palette":"green","order_by":"values","line_type":"solid","line_width":"normal"},"display_type":"area"}],"yaxis":{"label":"Hits","scale":"linear"},"markers":[{"value":"y = 50","display_type":"ok solid"}]},"layout":{"x":0,"y":7,"width":4,"height":3}},{"id":1000000000000011,"definition":{"title":"Estimated Cost Savings","title_size":"16","title_align":"center","type":"query_value","requests":[{"response_format":"scalar","queries":[{"data_source":"metrics","name":"query1","query":"sum:bearstack.cache.hits{*}.as_count()","aggregator":"avg"}],"formulas":[{"formula":"query1 * 0.001","number_format":{"unit":{"label":"$","type":"custom_unit_label"}}}],"conditional_formats":[{"comparator":">=","value":0.5,"palette":"white_on_green"},{"comparator":"<","value":0.5,"palette":"white_on_red"}]}],"autoscale":false,"precision":2,"timeseries_background":{"type":"area","yaxis":{"include_zero":false}}},"layout":{"x":4,"y":7,"width":2,"height":2}},{"id":1000000000000012,"definition":{"title":"Redis Memory Usage","title_size":"16","title_align":"left","show_legend":false,"legend_layout":"auto","legend_columns":["avg","min","max","value","sum"],"type":"timeseries","requests":[{"response_format":"timeseries","queries":[{"data_source":"metrics","name":"query1","query":"avg:redis.mem.used{service:gemini-challenge-app}"},{"data_source":"metrics","name":"query2","query":"avg:redis.mem.maxmemory{service:gemini-challenge-app}"}],"formulas":[{"formula":"(query1 / query2) * 100"}],"style":{"palette":"purple","order_by":"values","line_type":"solid","line_width":"normal"},"display_type":"line"}],"yaxis":{"label":"Usage %","scale":"linear","min":"0","max":"100"},"markers":[{"value":"y = 80","display_type":"error solid"},{"value":"y = 70","display_type":"warning dashed"}]},"layout":{"x":6,"y":7,"width":2,"height":2}},{"id":1000000000000010,"definition":{"title":"Cache Hits vs Misses","title_size":"16","title_align":"left","show_legend":true,"legend_layout":"auto","legend_columns":["avg","min","max","value","sum"],"type":"timeseries","requests":[{"response_format":"timeseries","queries":[{"name":"hits","data_source":"metrics","query":"sum:bearstack.cache.hits{*}.as_count()"}],"formulas":[{"formula":"hits","alias":"Cache Hits"}],"style":{"palette":"green","order_by":"values","line_type":"solid","line_width":"normal"},"display_type":"bars"},{"response_format":"timeseries","queries":[{"name":"misses","data_source":"metrics","query":"sum:bearstack.cache.misses{*}.as_count()"}],"formulas":[{"formula":"misses","alias":"Cache Misses"}],"style":{"palette":"orange","order_by":"values","line_type":"solid","line_width":"normal"},"display_type":"bars"}]},"layout":{"x":8,"y":7,"width":4,"height":3}},{"id":1000000000000014,"definition":{"title":"Jailbreak Keyword Detection Events","title_size":"16","title_align":"left","show_legend":true,"legend_layout":"horizontal","legend_columns":["avg","min","max","value","sum"],"type":"timeseries","requests":[{"response_format":"timeseries","queries":[{"data_source":"metrics","name":"query1","query":"avg:bearstack.api.jailbreaks.detected{*}.as_count()"}],"formulas":[{"formula":"query1"}],"style":{"palette":"red","order_by":"values","line_type":"solid","line_width":"normal"},"display_type":"line"}]},"layout":{"x":4,"y":9,"width":4,"height":2}},{"id":1000000000000013,"definition":{"title":"Number of Jailbreaks","title_size":"16","title_align":"left","show_legend":true,"legend_layout":"auto","legend_columns":["avg","min","max","value","sum"],"type":"timeseries","requests":[{"response_format":"timeseries","queries":[{"name":"query1","data_source":"spans","search":{"query":"env:production @security.jailbreak_attempt:true service:gemini-challenge-app"},"indexes":["*"],"group_by":[],"compute":{"aggregation":"count"},"storage":"hot"}],"formulas":[{"formula":"query1"}],"style":{"palette":"warm","order_by":"values","line_type":"solid","line_width":"normal"},"display_type":"bars"}],"markers":[{"value":"y = 10","display_type":"error dashed"},{"value":"y = 5","display_type":"warning dashed"}]},"layout":{"x":0,"y":10,"width":4,"height":3}},{"id":1000000000000015,"definition":{"title":"Most Active Users","title_size":"16","title_align":"left","requests":[{"queries":[{"name":"query1","data_source":"spans","search":{"query":"service:gemini-challenge-app"},"indexes":["*"],"group_by":[{"facet":"@user.id","limit":10,"sort":{"aggregation":"count","order":"desc","metric":"count"},"should_exclude_missing":true}],"compute":{"aggregation":"count"},"storage":"hot"}],"response_format":"scalar","style":{"palette":"datadog16"},"formulas":[{"formula":"query1"}],"sort":{"order_by":[{"type":"formula","index":0,"order":"desc"}]}}],"type":"sunburst","legend":{"type":"automatic"}},"layout":{"x":4,"y":11,"width":8,"height":4}},{"id":3810795575491023,"definition":{"title":"Redis Error Rate","title_size":"16","title_align":"center","type":"query_value","requests":[{"conditional_formats":[{"comparator":"<","value":1,"palette":"white_on_green"},{"comparator":">=","value":5,"palette":"white_on_red"},{"comparator":">=","value":1,"palette":"white_on_yellow"}],"response_format":"scalar","queries":[{"data_source":"metrics","name":"query1","query":"sum:trace.http.request.errors{service:gemini-challenge-app}.as_count()","aggregator":"avg"},{"data_source":"metrics","name":"query2","query":"sum:trace.http.request.hits{service:gemini-challenge-app}.as_count()","aggregator":"avg"}],"formulas":[{"formula":"(query1 / query2) * 100","number_format":{"unit":{"label":"%","type":"custom_unit_label"}}}]}],"precision":2},"layout":{"x":0,"y":13,"width":4,"height":2}},{"id":1000000000000016,"definition":{"title":"Hosts Overview","background_color":"pink","show_title":true,"type":"group","layout_type":"ordered","widgets":[{"id":1000000000000017,"definition":{"title":"System uptime","type":"query_value","requests":[{"response_format":"scalar","queries":[{"data_source":"metrics","name":"query1","query":"avg:system.uptime{host:docker-desktop}","aggregator":"last"}]}],"autoscale":true,"precision":1},"layout":{"x":0,"y":0,"width":2,"height":2}},{"id":1000000000000018,"definition":{"title":"Amount of free and used disk space per device","type":"query_table","requests":[{"response_format":"scalar","queries":[{"data_source":"metrics","name":"query1","query":"avg:system.disk.free{host:docker-desktop} by {device}","aggregator":"last"},{"data_source":"metrics","name":"query2","query":"avg:system.disk.used{host:docker-desktop} by {device}","aggregator":"last"}],"sort":{"count":50,"order_by":[{"type":"formula","index":0,"order":"desc"}]},"formulas":[{"formula":"query1","alias":"Free disk space"},{"formula":"query2","alias":"Used disk space"}]}]},"layout":{"x":2,"y":0,"width":4,"height":4}},{"id":1000000000000019,"definition":{"title":"CPU usage breakdown (%)","show_legend":false,"legend_layout":"auto","legend_columns":["avg","min","max","value","sum"],"type":"timeseries","requests":[{"formulas":[{"alias":"Idle","formula":"query1"},{"alias":"System","formula":"query2"},{"alias":"IO Wait","formula":"query3"},{"alias":"User","formula":"query4"}],"response_format":"timeseries","queries":[{"query":"avg:system.cpu.idle{host:docker-desktop}","data_source":"metrics","name":"query1"},{"query":"avg:system.cpu.system{host:docker-desktop}","data_source":"metrics","name":"query2"},{"query":"avg:system.cpu.iowait{host:docker-desktop}","data_source":"metrics","name":"query3"},{"query":"avg:system.cpu.user{host:docker-desktop}","data_source":"metrics","name":"query4"}],"style":{"palette":"cool","line_type":"solid","line_width":"normal"},"display_type":"area"}],"yaxis":{"include_zero":true,"scale":"linear","label":"","min":"auto","max":"auto"}},"layout":{"x":6,"y":0,"width":6,"height":2}},{"id":1000000000000020,"definition":{"title":"RAM breakdown","show_legend":false,"legend_layout":"auto","legend_columns":["avg","min","max","value","sum"],"type":"timeseries","requests":[{"formulas":[{"formula":"query2","alias":"Total"}],"response_format":"timeseries","on_right_yaxis":false,"queries":[{"query":"sum:system.mem.total{host:docker-desktop}","data_source":"metrics","name":"query2"}],"style":{"palette":"cool","line_type":"solid","line_width":"normal"},"display_type":"area"},{"formulas":[{"formula":"query0","alias":"Used"}],"response_format":"timeseries","on_right_yaxis":false,"queries":[{"query":"sum:system.mem.used{*}","data_source":"metrics","name":"query0"}],"style":{"palette":"purple","line_type":"solid","line_width":"normal"},"display_type":"area"}],"yaxis":{"include_zero":true,"scale":"linear","label":"","min":"auto","max":"auto"},"markers":[]},"layout":{"x":6,"y":2,"width":6,"height":2}},{"id":1000000000000021,"definition":{"title":"Network traffic (bytes per sec)","show_legend":false,"legend_layout":"auto","legend_columns":["avg","min","max","value","sum"],"type":"timeseries","requests":[{"formulas":[{"alias":"Received","formula":"query1"}],"response_format":"timeseries","queries":[{"query":"sum:system.net.bytes_rcvd{host:docker-desktop}","data_source":"metrics","name":"query1"}],"style":{"palette":"dog_classic","line_type":"solid","line_width":"normal"},"display_type":"bars"},{"formulas":[{"alias":"Sent","formula":"0 - query1"}],"response_format":"timeseries","queries":[{"query":"sum:system.net.bytes_sent{host:docker-desktop}","data_source":"metrics","name":"query1"}],"style":{"palette":"warm","line_type":"solid","line_width":"normal"},"display_type":"bars"}],"yaxis":{"include_zero":true,"scale":"linear","label":"","min":"auto","max":"auto"}},"layout":{"x":0,"y":4,"width":4,"height":2}},{"id":1000000000000022,"definition":{"title":"Available Swap","show_legend":false,"legend_layout":"auto","legend_columns":["avg","min","max","value","sum"],"type":"timeseries","requests":[{"formulas":[{"alias":"Free","formula":"query1 * 100"}],"response_format":"timeseries","queries":[{"query":"avg:system.swap.pct_free{host:docker-desktop}","data_source":"metrics","name":"query1"}],"style":{"palette":"grey","line_type":"solid","line_width":"normal"},"display_type":"area"}],"yaxis":{"include_zero":true,"scale":"linear","label":"","min":"auto","max":"auto"}},"layout":{"x":4,"y":4,"width":4,"height":2}}]},"layout":{"x":0,"y":15,"width":12,"height":7,"is_column_break":true}}],"template_variables":[],"layout_type":"ordered","notify_list":[],"reflow_type":"fixed","pause_auto_refresh":false}